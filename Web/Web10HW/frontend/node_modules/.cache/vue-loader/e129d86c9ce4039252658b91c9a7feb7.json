{"remainingRequest":"C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\src\\App.vue","mtime":1576768894607},{"path":"C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAnLi9jb21wb25lbnRzL0hlYWRlcicKaW1wb3J0IE1pZGRsZSBmcm9tICcuL2NvbXBvbmVudHMvTWlkZGxlJwppbXBvcnQgRm9vdGVyIGZyb20gJy4vY29tcG9uZW50cy9Gb290ZXInCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdhcHAnLAogICAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHVzZXI6IG51bGwsCiAgICAgICAgICAgIHBvc3RzOiBbXQogICAgICAgIH0KICAgIH0sCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgSGVhZGVyLAogICAgICAgIE1pZGRsZSwKICAgICAgICBGb290ZXIKICAgIH0sIGJlZm9yZUNyZWF0ZSgpIHsKICAgICAgICBheGlvcy5nZXQoIi9hcGkvMS9wb3N0cyIpLnRoZW4ocG9zdHMgPT4gdGhpcy5wb3N0cyA9IHBvc3RzWyJkYXRhIl0pOwoKICAgICAgICB0aGlzLiRyb290LiRvbigib25Mb2dvdXQiLCAoKSA9PiB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJqd3QiKTsKICAgICAgICAgICAgdGhpcy51c2VyID0gbnVsbDsKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy4kcm9vdC4kb24oIm9uSnd0IiwgKGp3dCwgZW50ZXIpID0+IHsKICAgICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycyA9IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIGp3dAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgYXhpb3MuZ2V0KCIvYXBpLzEvdXNlcnMvYXV0aG9yaXplZCIpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgdGhpcy51c2VyID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIGlmIChlbnRlcikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIm9uRW50ZXJTdWNjZXNzIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICB0aGlzLiRyb290LiRvbigib25FbnRlciIsIChsb2dpbiwgcGFzc3dvcmQpID0+IHsKICAgICAgICAgICAgYXhpb3MucG9zdCgiL2FwaS8xL2p3dCIsIHsKICAgICAgICAgICAgICAgIGxvZ2luOiBsb2dpbiwKICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZAogICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJqd3QiLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIm9uSnd0IiwgcmVzcG9uc2UuZGF0YSwgdHJ1ZSk7CiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIm9uRW50ZXJWYWxpZGF0aW9uRXJyb3IiLCBlcnJvci5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kcm9vdC4kb24oIm9uUmVnaXN0ZXIiLCAobG9naW4sIG5hbWUsIHBhc3N3b3JkKSA9PiB7CiAgICAgICAgICAgIGF4aW9zLnBvc3QoIi9hcGkvMS91c2VycyIsIHsKICAgICAgICAgICAgICAgIGxvZ2luOiBsb2dpbiwgbmFtZTogbmFtZSwgcGFzc3dvcmQ6IHBhc3N3b3JkLAogICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoIi9hcGkvMS9qd3QiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2luOiBsb2dpbiwKICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJqd3QiLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25Kd3QiLCByZXNwb25zZS5kYXRhLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvblJlZ2lzdGVyVmFsaWRhdGlvbkVycm9yIiwgZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHJvb3QuJG9uKCJvbkFkZFBvc3QiLCAodGl0bGUsIHRleHQpID0+IHsKICAgICAgICAgICAgaWYgKHRoaXMudXNlcikgewogICAgICAgICAgICAgICAgYXhpb3MucG9zdCgiL2FwaS8xL3Bvc3RzIiwgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSwgdGV4dDogdGV4dCwgYXV0aG9yOiB0aGlzLnVzZXIuaWQsCiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKCiAgICAgICAgICAgICAgICAgICAgYXhpb3MuZ2V0KCIvYXBpLzEvcG9zdHMiKS50aGVuKHBvc3RzID0+IHRoaXMucG9zdHMgPSBwb3N0c1siZGF0YSJdKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkFkZFBvc3RTdWNjZXNzIik7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25BZGRQb3N0VmFsaWRhdGlvbkVycm9yIiwgZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIm9uQWRkUG9zdFZhbGlkYXRpb25FcnJvciIsICJObyBhY2Nlc3MiKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICB0aGlzLiRyb290LiRvbigib25BZGRDb21tZW50IiwgKHBvc3QsIHRleHQpID0+IHsKICAgICAgICAgICAgaWYgKHRoaXMudXNlcikgewogICAgICAgICAgICAgICAgYXhpb3MucG9zdCgiL2FwaS8xL3Bvc3RzL2NvbW1lbnQiLCB7CiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dCwgYXV0aG9yOiB0aGlzLnVzZXIuaWQsIHBvc3Q6IHBvc3QsCiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkFkZENvbW1lbnRTdWNjZXNzIiwgcG9zdC5pZCk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25BZGRDb21tZW50VmFsaWRhdGlvbkVycm9yIiwgZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIm9uQWRkQ29tbWVudFZhbGlkYXRpb25FcnJvciIsICJObyBhY2Nlc3MiKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgIH0sIGJlZm9yZU1vdW50KCkgewogICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0IikgJiYgIXRoaXMudXNlcikgewogICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkp3dCIsIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJqd3QiKSwgdHJ1ZSk7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n    <!--suppress HtmlUnknownTag -->\n    <body id=\"app\">\n    <Header :user=\"user\"/>\n    <Middle :posts=\"posts\"/>\n    <Footer/>\n    </body>\n</template>\n\n<script>\n    import Header from './components/Header'\n    import Middle from './components/Middle'\n    import Footer from './components/Footer'\n    import axios from 'axios'\n\n    export default {\n        name: 'app',\n        data: function () {\n            return {\n                user: null,\n                posts: []\n            }\n        },\n        components: {\n            Header,\n            Middle,\n            Footer\n        }, beforeCreate() {\n            axios.get(\"/api/1/posts\").then(posts => this.posts = posts[\"data\"]);\n\n            this.$root.$on(\"onLogout\", () => {\n                localStorage.removeItem(\"jwt\");\n                this.user = null;\n            });\n\n            this.$root.$on(\"onJwt\", (jwt, enter) => {\n                axios.defaults.headers = {\n                    Authorization: \"Bearer \" + jwt\n                };\n\n                axios.get(\"/api/1/users/authorized\").then(response => {\n                    this.user = response.data;\n                    if (enter) {\n                        this.$root.$emit(\"onEnterSuccess\");\n                    }\n                });\n            });\n\n            this.$root.$on(\"onEnter\", (login, password) => {\n                axios.post(\"/api/1/jwt\", {\n                    login: login,\n                    password: password\n                }).then(response => {\n                    localStorage.setItem(\"jwt\", response.data);\n                    this.$root.$emit(\"onJwt\", response.data, true);\n                }).catch(error => {\n                    this.$root.$emit(\"onEnterValidationError\", error.response.data);\n                });\n            });\n            this.$root.$on(\"onRegister\", (login, name, password) => {\n                axios.post(\"/api/1/users\", {\n                    login: login, name: name, password: password,\n                }).then(() => {\n                    axios.post(\"/api/1/jwt\", {\n                            login: login,\n                            password: password\n                        }).then(response => {\n                            localStorage.setItem(\"jwt\", response.data);\n                            this.$root.$emit(\"onJwt\", response.data, true);\n                        })\n                }).catch(error => {\n                    this.$root.$emit(\"onRegisterValidationError\", error.response.data);\n                });\n            });\n            this.$root.$on(\"onAddPost\", (title, text) => {\n                if (this.user) {\n                    axios.post(\"/api/1/posts\", {\n                        title: title, text: text, author: this.user.id,\n                    }).then(() => {\n\n                        axios.get(\"/api/1/posts\").then(posts => this.posts = posts[\"data\"]);\n                        this.$root.$emit(\"onAddPostSuccess\");\n                    }).catch(error => {\n                        this.$root.$emit(\"onAddPostValidationError\", error.response.data);\n                    });\n                } else {\n                    this.$root.$emit(\"onAddPostValidationError\", \"No access\");\n                }\n            });\n\n            this.$root.$on(\"onAddComment\", (post, text) => {\n                if (this.user) {\n                    axios.post(\"/api/1/posts/comment\", {\n                        text: text, author: this.user.id, post: post,\n                    }).then(() => {\n                        this.$root.$emit(\"onAddCommentSuccess\", post.id);\n                    }).catch(error => {\n                        this.$root.$emit(\"onAddCommentValidationError\", error.response.data);\n                    });\n                } else {\n                    this.$root.$emit(\"onAddCommentValidationError\", \"No access\");\n                }\n            });\n\n        }, beforeMount() {\n            if (localStorage.getItem(\"jwt\") && !this.user) {\n                this.$root.$emit(\"onJwt\", localStorage.getItem(\"jwt\"), true);\n            }\n        }\n    }\n</script>\n\n<style>\n</style>\n"]}]}