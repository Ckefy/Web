{"remainingRequest":"C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\src\\App.vue","mtime":1576768894607},{"path":"C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Сеня\\Desktop\\Web10HW\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEhlYWRlciBmcm9tICcuL2NvbXBvbmVudHMvSGVhZGVyJzsKaW1wb3J0IE1pZGRsZSBmcm9tICcuL2NvbXBvbmVudHMvTWlkZGxlJzsKaW1wb3J0IEZvb3RlciBmcm9tICcuL2NvbXBvbmVudHMvRm9vdGVyJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdhcHAnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiBudWxsLAogICAgICBwb3N0czogW10KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBIZWFkZXI6IEhlYWRlciwKICAgIE1pZGRsZTogTWlkZGxlLAogICAgRm9vdGVyOiBGb290ZXIKICB9LAogIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24gYmVmb3JlQ3JlYXRlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBheGlvcy5nZXQoIi9hcGkvMS9wb3N0cyIpLnRoZW4oZnVuY3Rpb24gKHBvc3RzKSB7CiAgICAgIHJldHVybiBfdGhpcy5wb3N0cyA9IHBvc3RzWyJkYXRhIl07CiAgICB9KTsKICAgIHRoaXMuJHJvb3QuJG9uKCJvbkxvZ291dCIsIGZ1bmN0aW9uICgpIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImp3dCIpOwogICAgICBfdGhpcy51c2VyID0gbnVsbDsKICAgIH0pOwogICAgdGhpcy4kcm9vdC4kb24oIm9uSnd0IiwgZnVuY3Rpb24gKGp3dCwgZW50ZXIpIHsKICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycyA9IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyBqd3QKICAgICAgfTsKICAgICAgYXhpb3MuZ2V0KCIvYXBpLzEvdXNlcnMvYXV0aG9yaXplZCIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMudXNlciA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgIGlmIChlbnRlcikgewogICAgICAgICAgX3RoaXMuJHJvb3QuJGVtaXQoIm9uRW50ZXJTdWNjZXNzIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogICAgdGhpcy4kcm9vdC4kb24oIm9uRW50ZXIiLCBmdW5jdGlvbiAobG9naW4sIHBhc3N3b3JkKSB7CiAgICAgIGF4aW9zLnBvc3QoIi9hcGkvMS9qd3QiLCB7CiAgICAgICAgbG9naW46IGxvZ2luLAogICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJqd3QiLCByZXNwb25zZS5kYXRhKTsKCiAgICAgICAgX3RoaXMuJHJvb3QuJGVtaXQoIm9uSnd0IiwgcmVzcG9uc2UuZGF0YSwgdHJ1ZSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzLiRyb290LiRlbWl0KCJvbkVudGVyVmFsaWRhdGlvbkVycm9yIiwgZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pOwogICAgfSk7CiAgICB0aGlzLiRyb290LiRvbigib25SZWdpc3RlciIsIGZ1bmN0aW9uIChsb2dpbiwgbmFtZSwgcGFzc3dvcmQpIHsKICAgICAgYXhpb3MucG9zdCgiL2FwaS8xL3VzZXJzIiwgewogICAgICAgIGxvZ2luOiBsb2dpbiwKICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZAogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBheGlvcy5wb3N0KCIvYXBpLzEvand0IiwgewogICAgICAgICAgbG9naW46IGxvZ2luLAogICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJqd3QiLCByZXNwb25zZS5kYXRhKTsKCiAgICAgICAgICBfdGhpcy4kcm9vdC4kZW1pdCgib25Kd3QiLCByZXNwb25zZS5kYXRhLCB0cnVlKTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgX3RoaXMuJHJvb3QuJGVtaXQoIm9uUmVnaXN0ZXJWYWxpZGF0aW9uRXJyb3IiLCBlcnJvci5yZXNwb25zZS5kYXRhKTsKICAgICAgfSk7CiAgICB9KTsKICAgIHRoaXMuJHJvb3QuJG9uKCJvbkFkZFBvc3QiLCBmdW5jdGlvbiAodGl0bGUsIHRleHQpIHsKICAgICAgaWYgKF90aGlzLnVzZXIpIHsKICAgICAgICBheGlvcy5wb3N0KCIvYXBpLzEvcG9zdHMiLCB7CiAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICB0ZXh0OiB0ZXh0LAogICAgICAgICAgYXV0aG9yOiBfdGhpcy51c2VyLmlkCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBheGlvcy5nZXQoIi9hcGkvMS9wb3N0cyIpLnRoZW4oZnVuY3Rpb24gKHBvc3RzKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wb3N0cyA9IHBvc3RzWyJkYXRhIl07CiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpcy4kcm9vdC4kZW1pdCgib25BZGRQb3N0U3VjY2VzcyIpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgX3RoaXMuJHJvb3QuJGVtaXQoIm9uQWRkUG9zdFZhbGlkYXRpb25FcnJvciIsIGVycm9yLnJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLiRyb290LiRlbWl0KCJvbkFkZFBvc3RWYWxpZGF0aW9uRXJyb3IiLCAiTm8gYWNjZXNzIik7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy4kcm9vdC4kb24oIm9uQWRkQ29tbWVudCIsIGZ1bmN0aW9uIChwb3N0LCB0ZXh0KSB7CiAgICAgIGlmIChfdGhpcy51c2VyKSB7CiAgICAgICAgYXhpb3MucG9zdCgiL2FwaS8xL3Bvc3RzL2NvbW1lbnQiLCB7CiAgICAgICAgICB0ZXh0OiB0ZXh0LAogICAgICAgICAgYXV0aG9yOiBfdGhpcy51c2VyLmlkLAogICAgICAgICAgcG9zdDogcG9zdAogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuJHJvb3QuJGVtaXQoIm9uQWRkQ29tbWVudFN1Y2Nlc3MiLCBwb3N0LmlkKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIF90aGlzLiRyb290LiRlbWl0KCJvbkFkZENvbW1lbnRWYWxpZGF0aW9uRXJyb3IiLCBlcnJvci5yZXNwb25zZS5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy4kcm9vdC4kZW1pdCgib25BZGRDb21tZW50VmFsaWRhdGlvbkVycm9yIiwgIk5vIGFjY2VzcyIpOwogICAgICB9CiAgICB9KTsKICB9LAogIGJlZm9yZU1vdW50OiBmdW5jdGlvbiBiZWZvcmVNb3VudCgpIHsKICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0IikgJiYgIXRoaXMudXNlcikgewogICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkp3dCIsIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJqd3QiKSwgdHJ1ZSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <!--suppress HtmlUnknownTag -->\n    <body id=\"app\">\n    <Header :user=\"user\"/>\n    <Middle :posts=\"posts\"/>\n    <Footer/>\n    </body>\n</template>\n\n<script>\n    import Header from './components/Header'\n    import Middle from './components/Middle'\n    import Footer from './components/Footer'\n    import axios from 'axios'\n\n    export default {\n        name: 'app',\n        data: function () {\n            return {\n                user: null,\n                posts: []\n            }\n        },\n        components: {\n            Header,\n            Middle,\n            Footer\n        }, beforeCreate() {\n            axios.get(\"/api/1/posts\").then(posts => this.posts = posts[\"data\"]);\n\n            this.$root.$on(\"onLogout\", () => {\n                localStorage.removeItem(\"jwt\");\n                this.user = null;\n            });\n\n            this.$root.$on(\"onJwt\", (jwt, enter) => {\n                axios.defaults.headers = {\n                    Authorization: \"Bearer \" + jwt\n                };\n\n                axios.get(\"/api/1/users/authorized\").then(response => {\n                    this.user = response.data;\n                    if (enter) {\n                        this.$root.$emit(\"onEnterSuccess\");\n                    }\n                });\n            });\n\n            this.$root.$on(\"onEnter\", (login, password) => {\n                axios.post(\"/api/1/jwt\", {\n                    login: login,\n                    password: password\n                }).then(response => {\n                    localStorage.setItem(\"jwt\", response.data);\n                    this.$root.$emit(\"onJwt\", response.data, true);\n                }).catch(error => {\n                    this.$root.$emit(\"onEnterValidationError\", error.response.data);\n                });\n            });\n            this.$root.$on(\"onRegister\", (login, name, password) => {\n                axios.post(\"/api/1/users\", {\n                    login: login, name: name, password: password,\n                }).then(() => {\n                    axios.post(\"/api/1/jwt\", {\n                            login: login,\n                            password: password\n                        }).then(response => {\n                            localStorage.setItem(\"jwt\", response.data);\n                            this.$root.$emit(\"onJwt\", response.data, true);\n                        })\n                }).catch(error => {\n                    this.$root.$emit(\"onRegisterValidationError\", error.response.data);\n                });\n            });\n            this.$root.$on(\"onAddPost\", (title, text) => {\n                if (this.user) {\n                    axios.post(\"/api/1/posts\", {\n                        title: title, text: text, author: this.user.id,\n                    }).then(() => {\n\n                        axios.get(\"/api/1/posts\").then(posts => this.posts = posts[\"data\"]);\n                        this.$root.$emit(\"onAddPostSuccess\");\n                    }).catch(error => {\n                        this.$root.$emit(\"onAddPostValidationError\", error.response.data);\n                    });\n                } else {\n                    this.$root.$emit(\"onAddPostValidationError\", \"No access\");\n                }\n            });\n\n            this.$root.$on(\"onAddComment\", (post, text) => {\n                if (this.user) {\n                    axios.post(\"/api/1/posts/comment\", {\n                        text: text, author: this.user.id, post: post,\n                    }).then(() => {\n                        this.$root.$emit(\"onAddCommentSuccess\", post.id);\n                    }).catch(error => {\n                        this.$root.$emit(\"onAddCommentValidationError\", error.response.data);\n                    });\n                } else {\n                    this.$root.$emit(\"onAddCommentValidationError\", \"No access\");\n                }\n            });\n\n        }, beforeMount() {\n            if (localStorage.getItem(\"jwt\") && !this.user) {\n                this.$root.$emit(\"onJwt\", localStorage.getItem(\"jwt\"), true);\n            }\n        }\n    }\n</script>\n\n<style>\n</style>\n"],"sourceRoot":"src"}]}